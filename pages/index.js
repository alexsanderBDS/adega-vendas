import { useContext, useEffect, useState } from "react";
import Admin from "../components/Admin";
import { AuthContext } from "../context/firebaseContext";
import styles from "../styles/Home.module.css";
import { useRouter } from "next/router";

const Iniciar = () => {
  const [display, setDisplay] = useState("d-none");
  let router = useRouter();

  const handleClick = () => {
    setDisplay("alert alert-success");

    setTimeout(() => {
      router.push("/login");
    }, 3000);
  };

  return (
    <div className="d-flex flex-column justify-content-around align-items-center gap-3">
      <svg
        width="90%"
        height="90%"
        viewBox="0 0 754 704"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g id="allPapers" clipPath="url(#clip0)">
          <g id="paperSecond">
            <path
              id="Vector"
              d="M355.412 5.87184L332.344 18.4585L48.1358 173.529L25.0673 186.115C13.8738 192.239 5.56646 202.553 1.96784 214.794C-1.63077 227.035 -0.22677 240.204 5.87183 251.411L217.515 639.305C223.639 650.498 233.953 658.806 246.194 662.404C258.435 666.003 271.604 664.599 282.811 658.5L282.871 658.468L613.096 478.29L613.156 478.257C624.349 472.133 632.657 461.819 636.255 449.578C639.854 437.337 638.45 424.168 632.352 412.961L420.708 25.0675C414.585 13.874 404.271 5.56658 392.03 1.96794C379.788 -1.63071 366.62 -0.226737 355.412 5.87184V5.87184Z"
              fill="#F2F2F2"
            />
            <path
              id="Vector_2"
              d="M362.048 18.0333L334.725 32.9413L59.0256 183.369L31.703 198.277C23.7318 202.638 17.8159 209.983 15.2533 218.7C12.6906 227.417 13.6904 236.795 18.0334 244.776L229.676 632.669C234.037 640.64 241.382 646.556 250.099 649.119C258.817 651.682 268.194 650.682 276.175 646.339L276.235 646.306L606.461 466.128L606.521 466.095C614.492 461.734 620.408 454.39 622.97 445.672C625.533 436.955 624.533 427.578 620.19 419.597L408.547 31.7031C404.186 23.732 396.841 17.8161 388.124 15.2534C379.407 12.6907 370.029 13.6904 362.048 18.0333V18.0333Z"
              fill="white"
            />
            <path
              id="Vector_3"
              d="M366.604 138.436L243.442 205.635C241.577 206.653 239.383 206.888 237.344 206.289C235.304 205.689 233.587 204.304 232.569 202.439C231.551 200.573 231.316 198.379 231.915 196.34C232.515 194.301 233.9 192.583 235.765 191.565L358.927 124.365C360.793 123.347 362.987 123.112 365.026 123.712C367.065 124.311 368.782 125.696 369.8 127.562C370.819 129.428 371.054 131.622 370.454 133.661C369.855 135.7 368.47 137.418 366.604 138.436H366.604Z"
              fill="#F2F2F2"
            />
            <path
              id="Vector_4"
              d="M408.578 146.345L256.397 229.379C254.531 230.397 252.338 230.632 250.298 230.032C248.259 229.433 246.542 228.048 245.524 226.182C244.506 224.316 244.27 222.122 244.87 220.083C245.469 218.044 246.854 216.326 248.72 215.308L400.901 132.275C401.825 131.771 402.839 131.454 403.886 131.342C404.932 131.229 405.991 131.325 407 131.621C408.01 131.918 408.951 132.411 409.77 133.072C410.59 133.732 411.271 134.548 411.775 135.472C412.279 136.395 412.596 137.41 412.708 138.456C412.821 139.502 412.725 140.561 412.429 141.57C412.132 142.58 411.639 143.521 410.978 144.341C410.318 145.16 409.502 145.841 408.578 146.345H408.578Z"
              fill="#F2F2F2"
            />
            <path
              id="Vector_5"
              d="M192.81 177.662L79.2617 239.617C78.3679 240.105 77.7044 240.928 77.4172 241.905C77.13 242.882 77.2426 243.933 77.7302 244.827L126.082 333.444C126.57 334.338 127.393 335.001 128.37 335.289C129.347 335.576 130.398 335.463 131.292 334.976L244.84 273.022C245.733 272.534 246.397 271.711 246.684 270.734C246.971 269.757 246.859 268.706 246.371 267.812L198.02 179.194C197.532 178.3 196.709 177.637 195.732 177.35C194.755 177.062 193.704 177.175 192.81 177.662V177.662Z"
              fill="#F2F2F2"
            />
            <path
              id="Vector_6"
              d="M427.714 250.877L260.66 342.025C259.736 342.529 258.722 342.846 257.676 342.958C256.63 343.07 255.571 342.975 254.562 342.678C253.552 342.382 252.61 341.889 251.791 341.228C250.972 340.567 250.291 339.752 249.787 338.828C249.283 337.904 248.966 336.89 248.853 335.844C248.741 334.797 248.836 333.739 249.133 332.729C249.43 331.72 249.923 330.778 250.583 329.959C251.244 329.14 252.059 328.459 252.983 327.954L420.037 236.807C421.902 235.789 424.096 235.553 426.135 236.153C428.175 236.752 429.892 238.137 430.91 240.003C431.928 241.869 432.163 244.063 431.564 246.102C430.964 248.141 429.579 249.859 427.714 250.877H427.714Z"
              fill="#F2F2F2"
            />
            <path
              id="Vector_7"
              d="M469.688 258.786L273.615 365.768C271.749 366.786 269.556 367.021 267.516 366.422C265.477 365.822 263.76 364.437 262.742 362.571C261.724 360.706 261.488 358.512 262.088 356.473C262.687 354.433 264.072 352.716 265.938 351.698L462.011 244.716C463.877 243.698 466.071 243.463 468.11 244.063C470.149 244.662 471.867 246.047 472.885 247.913C473.903 249.779 474.138 251.972 473.538 254.012C472.939 256.051 471.554 257.768 469.688 258.786H469.688Z"
              fill="#F2F2F2"
            />
            <path
              id="Vector_8"
              d="M197.039 416.672C215.816 416.672 231.039 401.449 231.039 382.672C231.039 363.894 215.816 348.672 197.039 348.672C178.261 348.672 163.039 363.894 163.039 382.672C163.039 401.449 178.261 416.672 197.039 416.672Z"
              fill="#F2F2F2"
            />
          </g>
          <g id="paperFirst">
            <path
              id="Vector_9"
              d="M705.75 165.702H329.431C316.672 165.717 304.44 170.792 295.418 179.814C286.396 188.836 281.321 201.068 281.306 213.827V655.703C281.321 668.462 286.396 680.695 295.418 689.717C304.44 698.739 316.672 703.814 329.431 703.828H705.75C718.509 703.814 730.741 698.739 739.763 689.717C748.785 680.695 753.86 668.462 753.875 655.703V213.827C753.86 201.068 748.785 188.836 739.763 179.814C730.741 170.792 718.509 165.717 705.75 165.702V165.702Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_10"
              d="M705.75 179.556H329.431C320.345 179.567 311.634 183.181 305.209 189.605C298.785 196.03 295.171 204.741 295.16 213.827V655.703C295.171 664.789 298.785 673.5 305.209 679.925C311.634 686.35 320.345 689.964 329.431 689.974H705.75C714.836 689.964 723.547 686.35 729.972 679.925C736.397 673.5 740.01 664.789 740.021 655.703V213.827C740.01 204.741 736.397 196.03 729.972 189.606C723.547 183.181 714.836 179.567 705.75 179.556V179.556Z"
              fill="white"
            />
            <path
              id="Vector_11"
              d="M651.869 415.406H461.568C460.515 415.406 459.473 415.198 458.501 414.796C457.529 414.393 456.645 413.803 455.901 413.058C455.157 412.314 454.566 411.431 454.164 410.458C453.761 409.486 453.554 408.444 453.554 407.392C453.554 406.339 453.761 405.297 454.164 404.325C454.566 403.352 455.157 402.469 455.901 401.725C456.645 400.981 457.529 400.39 458.501 399.987C459.473 399.585 460.515 399.377 461.568 399.377H651.869C653.993 399.38 656.029 400.225 657.53 401.728C659.031 403.231 659.875 405.268 659.875 407.392C659.875 409.515 659.031 411.553 657.53 413.055C656.029 414.558 653.993 415.403 651.869 415.406V415.406Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_12"
              d="M684.928 442.453H461.568C460.514 442.454 459.471 442.248 458.498 441.846C457.525 441.444 456.64 440.853 455.895 440.109C455.15 439.365 454.559 438.481 454.155 437.508C453.752 436.535 453.545 435.492 453.545 434.439C453.545 433.386 453.752 432.343 454.155 431.37C454.559 430.397 455.15 429.514 455.895 428.769C456.64 428.025 457.525 427.435 458.498 427.033C459.471 426.63 460.514 426.424 461.568 426.425H684.928C685.981 426.424 687.024 426.63 687.997 427.033C688.971 427.435 689.855 428.025 690.6 428.769C691.345 429.514 691.936 430.397 692.34 431.37C692.743 432.343 692.951 433.386 692.951 434.439C692.951 435.492 692.743 436.535 692.34 437.508C691.936 438.481 691.345 439.365 690.6 440.109C689.855 440.853 688.971 441.444 687.997 441.846C687.024 442.248 685.981 442.454 684.928 442.453Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_13"
              d="M651.869 512.619H461.568C459.442 512.619 457.404 511.775 455.901 510.272C454.398 508.769 453.554 506.731 453.554 504.605C453.554 502.48 454.398 500.441 455.901 498.938C457.404 497.435 459.442 496.591 461.568 496.591H651.869C653.995 496.591 656.033 497.435 657.536 498.938C659.039 500.441 659.883 502.48 659.883 504.605C659.883 506.731 659.039 508.769 657.536 510.272C656.033 511.775 653.995 512.619 651.869 512.619V512.619Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_14"
              d="M684.928 539.667H461.568C459.442 539.667 457.404 538.822 455.901 537.32C454.398 535.817 453.554 533.778 453.554 531.653C453.554 529.527 454.398 527.489 455.901 525.986C457.404 524.483 459.442 523.639 461.568 523.639H684.928C687.053 523.639 689.091 524.483 690.594 525.986C692.097 527.489 692.942 529.527 692.942 531.653C692.942 533.778 692.097 535.817 690.594 537.32C689.091 538.822 687.053 539.667 684.928 539.667Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_15"
              d="M386.25 454.614C405.027 454.614 420.25 439.392 420.25 420.614C420.25 401.837 405.027 386.614 386.25 386.614C367.472 386.614 352.25 401.837 352.25 420.614C352.25 439.392 367.472 454.614 386.25 454.614Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_16"
              d="M651.62 326.791H461.318C460.266 326.791 459.223 326.584 458.251 326.181C457.279 325.778 456.395 325.188 455.651 324.444C454.907 323.7 454.317 322.816 453.914 321.844C453.511 320.872 453.304 319.83 453.304 318.777C453.304 317.725 453.511 316.683 453.914 315.71C454.317 314.738 454.907 313.854 455.651 313.11C456.395 312.366 457.279 311.776 458.251 311.373C459.223 310.97 460.266 310.763 461.318 310.763H651.62C653.744 310.765 655.78 311.611 657.281 313.113C658.782 314.616 659.625 316.653 659.625 318.777C659.625 320.901 658.782 322.938 657.281 324.441C655.78 325.943 653.744 326.789 651.62 326.791V326.791Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_17"
              d="M684.678 353.839H461.318C460.265 353.84 459.222 353.634 458.248 353.231C457.275 352.829 456.39 352.239 455.645 351.495C454.9 350.75 454.309 349.867 453.906 348.894C453.502 347.921 453.295 346.878 453.295 345.825C453.295 344.772 453.502 343.729 453.906 342.756C454.309 341.783 454.9 340.899 455.645 340.155C456.39 339.41 457.275 338.82 458.248 338.418C459.222 338.016 460.265 337.809 461.318 337.811H684.678C685.731 337.809 686.774 338.016 687.748 338.418C688.721 338.82 689.605 339.41 690.35 340.155C691.096 340.899 691.687 341.783 692.09 342.756C692.493 343.729 692.701 344.772 692.701 345.825C692.701 346.878 692.493 347.921 692.09 348.894C691.687 349.867 691.096 350.75 690.35 351.495C689.605 352.239 688.721 352.829 687.748 353.231C686.774 353.634 685.731 353.84 684.678 353.839Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_18"
              d="M386 366C404.778 366 420 350.778 420 332C420 313.222 404.778 298 386 298C367.222 298 352 313.222 352 332C352 350.778 367.222 366 386 366Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_19"
              d="M651.62 238.791H461.318C460.266 238.791 459.223 238.584 458.251 238.181C457.279 237.778 456.395 237.188 455.651 236.444C454.907 235.7 454.317 234.816 453.914 233.844C453.511 232.872 453.304 231.83 453.304 230.777C453.304 229.725 453.511 228.683 453.914 227.71C454.317 226.738 454.907 225.854 455.651 225.11C456.395 224.366 457.279 223.776 458.251 223.373C459.223 222.97 460.266 222.763 461.318 222.763H651.62C653.744 222.765 655.78 223.611 657.281 225.113C658.782 226.616 659.625 228.653 659.625 230.777C659.625 232.901 658.782 234.938 657.281 236.441C655.78 237.943 653.744 238.789 651.62 238.791V238.791Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_20"
              d="M684.678 265.839H461.318C460.265 265.84 459.222 265.634 458.248 265.231C457.275 264.829 456.39 264.239 455.645 263.495C454.9 262.75 454.309 261.867 453.906 260.894C453.502 259.921 453.295 258.878 453.295 257.825C453.295 256.772 453.502 255.729 453.906 254.756C454.309 253.783 454.9 252.899 455.645 252.155C456.39 251.41 457.275 250.82 458.248 250.418C459.222 250.016 460.265 249.809 461.318 249.811H684.678C685.731 249.809 686.774 250.016 687.748 250.418C688.721 250.82 689.605 251.41 690.35 252.155C691.096 252.899 691.687 253.783 692.09 254.756C692.493 255.729 692.701 256.772 692.701 257.825C692.701 258.878 692.493 259.921 692.09 260.894C691.687 261.867 691.096 262.75 690.35 263.495C689.605 264.239 688.721 264.829 687.748 265.231C686.774 265.634 685.731 265.84 684.678 265.839Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_21"
              d="M386 278C404.778 278 420 262.778 420 244C420 225.222 404.778 210 386 210C367.222 210 352 225.222 352 244C352 262.778 367.222 278 386 278Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_22"
              d="M386.25 552.615C405.027 552.615 420.25 537.392 420.25 518.615C420.25 499.837 405.027 484.614 386.25 484.614C367.472 484.614 352.25 499.837 352.25 518.615C352.25 537.392 367.472 552.615 386.25 552.615Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_23"
              d="M651.869 610.619H461.568C459.442 610.619 457.404 609.775 455.901 608.272C454.398 606.769 453.554 604.731 453.554 602.605C453.554 600.48 454.398 598.441 455.901 596.938C457.404 595.435 459.442 594.591 461.568 594.591H651.869C653.995 594.591 656.033 595.435 657.536 596.938C659.039 598.441 659.883 600.48 659.883 602.605C659.883 604.731 659.039 606.769 657.536 608.272C656.033 609.775 653.995 610.619 651.869 610.619V610.619Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_24"
              d="M684.928 637.667H461.568C459.442 637.667 457.404 636.822 455.901 635.32C454.398 633.817 453.554 631.778 453.554 629.653C453.554 627.527 454.398 625.489 455.901 623.986C457.404 622.483 459.442 621.639 461.568 621.639H684.928C687.053 621.639 689.091 622.483 690.594 623.986C692.097 625.489 692.942 627.527 692.942 629.653C692.942 631.778 692.097 633.817 690.594 635.32C689.091 636.822 687.053 637.667 684.928 637.667V637.667Z"
              fill="#E6E6E6"
            />
            <path
              id="Vector_25"
              d="M386.25 650.615C405.027 650.615 420.25 635.392 420.25 616.615C420.25 597.837 405.027 582.615 386.25 582.615C367.472 582.615 352.25 597.837 352.25 616.615C352.25 635.392 367.472 650.615 386.25 650.615Z"
              fill="#E6E6E6"
            />
          </g>
        </g>
        <defs>
          <clipPath id="clip0">
            <rect width="753.875" height="703.828" fill="white" />
          </clipPath>
        </defs>
      </svg>

      <h1>Bem vindo!</h1>
      <h4>Vamos Iniciar</h4>
      <button className="btn btn-primary" onClick={handleClick}>
        Iniciar
      </button>
      <div className={display} role="alert">
        Primeiro você precisa entrar com sua conta do Google ;)
        <br />
        <br />
        Vamos Lá!
      </div>
    </div>
  );
};

export default function Home() {
  const { state } = useContext(AuthContext);
  const [user, setUser] = useState();

  useEffect(() => {
    if (state.user) {
      setUser(state.user);
    }
  }, [state]);

  return (
    <div className={styles.container}>
      {user ? <Admin user={user} /> : <Iniciar />}
    </div>
  );
}
